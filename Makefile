## Copyright (c) 2025 albaDsl

.PHONY: build clean alba test benchmark

build:
	cabal build lib:bchn-secp256k1
	cabal build

clean:
	cabal clean

alba:
	# gh68vq
	cabal run alba -- vm --tx 0200000001010000000000000000000000000000000000000000000000000000000000000000000000fd4e014cd00200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000332103a524f43d6166ad3567f18b0a5c769c6ab4dc02149f4d5095ccf4e8ffa293e7856eac696ead7c8251947f757ba87b6fbbba102700000000000000000000b21e0163249698e7384609bb347d85b41c11011a4b07443763b0a39a72f3a7ef00000000c100000047304402200333d8554848f0fc6492ce53ea7b0d36aa5c68fa3bf02bf31a4c745c4e7bdf9b0220766256449bc75cbfce23f399a4e12cef6b8f0c602f036a4242630fe8a052afc9c1332103a524f43d6166ad3567f18b0a5c769c6ab4dc02149f4d5095ccf4e8ffa293e7856eac696ead7c8251947f757ba87b6fbbba000000000100000000000000000a6a08766d625f7465737400000000 --utxos 01102700000000000017a914bd6c8a0b2ea22538d6b31ad0499a86e52f80926c87 --input 0

test: build
	cabal run -- test --quickcheck-tests 200 --quickcheck-max-ratio 100
	cabal run lastWill -- test
	cabal run transferWithTimeout -- test

benchmark:
	cabal run benchmark1 -- --output benchmark1.html
	cabal run benchmark2 -- --output benchmark2.html

# VM profiling.
ecmul:
	cabal run --enable-profiling ecmul -- +RTS -p
